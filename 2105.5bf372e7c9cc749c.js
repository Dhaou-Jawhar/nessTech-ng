"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[2105],{2105:(D,b,i)=>{i.r(b),i.d(b,{LoginModule:()=>I});var g=i(6814),c=i(2058),e=i(9467),y=i(1206),_=i(5219),P=i(3859),u=i(707),v=i(8057),p=i(3714),d=i(95),M=i(7853),f=i(3530),C=i(4104),x=i(4480);function T(o,m){1&o&&(e.TgZ(0,"div",45),e._uU(1," Code re\xe7u par e-mail est obligatoire. "),e.qZA())}function Z(o,m){1&o&&(e.TgZ(0,"div",45),e._uU(1," Nouveau mot de passe est obligatoire. "),e.qZA())}function w(o,m){1&o&&(e.TgZ(0,"div",45),e._uU(1," Nouveau mot de passe doit contenir au moins 8 caract\xe8res. "),e.qZA())}function O(o,m){1&o&&(e.TgZ(0,"div",45),e._uU(1," Confirmation du mot de passe est obligatoire. "),e.qZA())}function k(o,m){1&o&&(e.TgZ(0,"div",45),e._uU(1," Les mots de passe ne correspondent pas. "),e.qZA())}const S=()=>["/"],A=()=>({width:"30vw"}),J=()=>({width:"40vw"});let L=(()=>{class o{constructor(r,s,t,n){this.userService=r,this.router=s,this.messageService=t,this.layoutService=n,this.valCheck=["remember"],this.display=!1,this.created=!0,this.not_created=!0,this.mail="",this.mailToken="",this.pass="",this.showPassword=!1,this.isUserSpace=!0,this.showError=!1,this.displayModal=!1,this.successModalVisible=!1,this.confirmPass=""}login(r){r.valid&&this.userService.login(r.value).subscribe({next:s=>{const{accessToken:t,refreshToken:n,firstName:a,lastName:l,usrMail:Y,role:h,picture_url:j}=s;this.userService.storeTokens(t,n,a,l,Y,j),"ADMIN"===h||"MODERATOR"===h||"CANDIDAT"===h?this.router.navigate(["dashboard"]):(this.showError=!0,setTimeout(()=>{this.showError=!1},2e3))},error:s=>{this.userService.showErrorAlert(s),this.showError=!0,setTimeout(()=>{this.showError=!1},2e3)}})}onSubmit(){this.displayModal=!1}onCancel(){this.displayModal=!1}resetPassword(){this.userService.requestPasswordReset(this.mail).subscribe(r=>{const s=r.message;"V\xe9rification requise, un e-mail de v\xe9rification a \xe9t\xe9 envoy\xe9!"===s?(this.messageService.add({severity:"success",summary:"Succ\xe8s!",detail:s}),setTimeout(()=>{this.displayModal=!1,this.successModalVisible=!0},2e3)):this.messageService.add({severity:"error",summary:"Erreur!",detail:s})},r=>{console.error("Erreur lors de la demande de r\xe9initialisation du mot de passe:",r),this.messageService.add({severity:"error",summary:"Erreur!",detail:"Une erreur s'est produite. Veuillez r\xe9essayer plus tard."})})}togglePasswordVisibility(){this.showPassword=!this.showPassword}submitSecondModalForm(){this.pass===this.confirmPass?this.userService.confirmReset(this.mailToken,this.pass).subscribe(r=>{const s=r.message;"Veuillez v\xe9rifier le code envoy\xe9 par mail!"===s?this.messageService.add({severity:"error",summary:"Erreur!",detail:s}):"Mot de passe modifi\xe9 avec succ\xe8s!"===s&&(this.messageService.add({severity:"success",summary:"Succ\xe8s!",detail:s}),setTimeout(()=>{this.successModalVisible=!1},2e3))},r=>{this.messageService.add({severity:"error",summary:"Erreur!",detail:"Une erreur s'est produite. Veuillez r\xe9essayer plus tard."})}):this.messageService.add({severity:"error",summary:"Erreur!",detail:"Les mots de passe ne correspondent pas."})}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(y.K),e.Y36(c.F0),e.Y36(_.ez),e.Y36(P.P))};static#n=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:73,vars:28,consts:[[1,"login-page"],["autoplay","","muted","","loop","","id","background-video"],["type","video/mp4",3,"src"],[1,"circles-container"],[1,"circles"],[1,"login-container","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden"],[1,"flex","flex-column","align-items-center","justify-content-center"],["alt","NessTechno logo",1,"logo","mb-5","w-16rem","flex-shrink-0",3,"src"],[1,"w-full","log-card","py-8","px-5","sm:px-8"],[1,"form",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["for","email1",1,"block","text-900","text-xl","font-medium","mb-2"],["id","email1","type","text","placeholder","Email address","pInputText","","required","","ngModel","","name","email",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem"],["for","password",1,"block","text-900","font-medium","text-xl","mb-2"],["required","","ngModel","","name","password","id","password","placeholder","Password","styleClass","mb-5","inputStyleClass","w-full p-3 md:w-30rem",3,"toggleMask"],["pButton","","pRipple","","type","submit","label","Sign In",1,"w-full","p-3","text-xl","sign-in-btn",3,"routerLink"],[1,"flex","align-items-center","justify-content-between","gap-1","mt-4"],[1,"flex","align-items-center"],["id","rememberme1","styleClass","mr-3",3,"binary"],["for","rememberme1"],[1,"link-custom","font-medium","no-underline","ml-2","text-right","cursor-pointer",2,"color","var(--primary-color)",3,"click"],[1,"register-link","mt-4"],["href",""],["header","R\xe9initialiser le mot de passe",1,"centered-dialog",2,"text-align","center",3,"visible","modal","visibleChange"],[1,"p-fluid"],[1,"p-field"],["for","mail",1,"block","text-900","text-xl","font-medium","mb-2",2,"text-align","center"],["id","mail","type","text","placeholder","Email address","pInputText","","required","","name","mail",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModel","ngModelChange"],[1,"p-field","p-mt-4","flex","justify-content-center","gap-4"],["pButton","","type","button","label","Annuler",1,"p-button-secondary","p-button-outlined",3,"click"],["pButton","","type","button","label","Valider",1,"p-button-primary",3,"click"],["header","Modifier votre mot de passe",1,"centered-dialog",2,"text-align","center",3,"visible","modal","visibleChange"],[1,"w-full","log-card","py-8","px-5","sm:px-8",2,"border-radius","53px"],[3,"ngSubmit"],["form","ngForm"],["for","mailToken",1,"block","text-900","text-xl","font-medium","mb-2"],["id","mailToken","type","text","placeholder","Code re\xe7u par e-mail","pInputText","","required","","name","mailToken",1,"w-full","md:w-30rem","mb-5",2,"padding","1rem",3,"ngModel","ngModelChange"],["class","p-error",4,"ngIf"],["for","pass",1,"block","text-900","font-medium","text-xl","mb-2"],["required","","name","pass","id","pass","minlength","8","placeholder","Nouveau mot de passe","feedback","false","styleClass","mb-5","inputStyleClass","w-full p-3 md:w-30rem",3,"ngModel","toggleMask","ngModelChange"],["for","confirmPass",1,"block","text-900","font-medium","text-xl","mb-2"],["required","","minlength","8","name","confirmPass","id","confirmPass","placeholder","Confirmer le mot de passe","feedback","false","styleClass","mb-5","inputStyleClass","w-full p-3 md:w-30rem",3,"ngModel","toggleMask","ngModelChange"],["pButton","","type","button","label","Fermer",1,"p-button-secondary","p-mr-2",3,"click"],["pButton","","type","submit","label","Valider",1,"p-button-primary",3,"disabled"],[1,"p-error"]],template:function(s,t){if(1&s){const n=e.EpF();e.TgZ(0,"div",0)(1,"video",1),e._UZ(2,"source",2),e.qZA(),e._UZ(3,"p-toast"),e.TgZ(4,"div",3)(5,"ul",4),e._UZ(6,"li")(7,"li")(8,"li")(9,"li")(10,"li")(11,"li")(12,"li")(13,"li")(14,"li")(15,"li"),e.qZA()(),e.TgZ(16,"div",5)(17,"div",6),e._UZ(18,"img",7),e.TgZ(19,"div",8)(20,"form",9,10),e.NdJ("ngSubmit",function(){e.CHM(n);const l=e.MAs(21);return e.KtG(t.login(l))}),e.TgZ(22,"div",11)(23,"label",12),e._uU(24,"Email"),e.qZA(),e._UZ(25,"input",13),e.qZA(),e.TgZ(26,"div",11)(27,"label",14),e._uU(28,"Password"),e.qZA(),e._UZ(29,"p-password",15),e.qZA(),e._UZ(30,"button",16),e.qZA(),e.TgZ(31,"div",17)(32,"div",18),e._UZ(33,"p-checkbox",19),e.TgZ(34,"label",20),e._uU(35,"Remember me"),e.qZA()(),e.TgZ(36,"a",21),e.NdJ("click",function(){return t.displayModal=!0}),e._uU(37,"Forgot password?"),e.qZA()()(),e.TgZ(38,"div",22)(39,"p"),e._uU(40,"Don't have an account? "),e.TgZ(41,"a",23),e._uU(42,"Register here!"),e.qZA()()()(),e.TgZ(43,"p-dialog",24),e.NdJ("visibleChange",function(l){return t.displayModal=l}),e.TgZ(44,"div",25)(45,"div",26)(46,"label",27),e._uU(47,"Votre e-mail"),e.qZA(),e.TgZ(48,"input",28),e.NdJ("ngModelChange",function(l){return t.mail=l}),e.qZA()(),e.TgZ(49,"div",29)(50,"button",30),e.NdJ("click",function(){return t.onCancel()}),e.qZA(),e.TgZ(51,"button",31),e.NdJ("click",function(){return t.resetPassword()}),e.qZA()()()(),e.TgZ(52,"p-dialog",32),e.NdJ("visibleChange",function(l){return t.successModalVisible=l}),e.TgZ(53,"div",33)(54,"form",34,35),e.NdJ("ngSubmit",function(){return t.submitSecondModalForm()}),e.TgZ(56,"label",36),e._uU(57,"Code re\xe7u par e-mail"),e.qZA(),e.TgZ(58,"input",37),e.NdJ("ngModelChange",function(l){return t.mailToken=l}),e.qZA(),e.YNc(59,T,2,0,"div",38),e.TgZ(60,"label",39),e._uU(61,"Nouveau mot de passe"),e.qZA(),e.TgZ(62,"p-password",40),e.NdJ("ngModelChange",function(l){return t.pass=l}),e.qZA(),e.YNc(63,Z,2,0,"div",38)(64,w,2,0,"div",38),e.TgZ(65,"label",41),e._uU(66,"Confirmer le mot de passe"),e.qZA(),e.TgZ(67,"p-password",42),e.NdJ("ngModelChange",function(l){return t.confirmPass=l}),e.qZA(),e.YNc(68,O,2,0,"div",38)(69,k,2,0,"div",38),e.TgZ(70,"div",29)(71,"button",43),e.NdJ("click",function(){return t.successModalVisible=!1}),e.qZA(),e._UZ(72,"button",44),e.qZA()()()()()()}if(2&s){const n=e.MAs(55);e.xp6(2),e.MGl("src","assets/layout/videos/","light"===t.layoutService.config().colorScheme?"login-light":"login-dark",".mp4",e.LSH),e.xp6(16),e.MGl("src","assets/layout/images/","light"===t.layoutService.config().colorScheme?"NessLogo":"ness-dark",".png",e.LSH),e.xp6(11),e.Q6J("toggleMask",!0),e.xp6(1),e.Q6J("routerLink",e.DdM(25,S)),e.xp6(3),e.Q6J("binary",!0),e.xp6(10),e.Akn(e.DdM(26,A)),e.Q6J("visible",t.displayModal)("modal",!0),e.xp6(5),e.Q6J("ngModel",t.mail),e.xp6(4),e.Akn(e.DdM(27,J)),e.Q6J("visible",t.successModalVisible)("modal",!0),e.xp6(6),e.Q6J("ngModel",t.mailToken),e.xp6(1),e.Q6J("ngIf",(null==n.controls.mailToken||null==n.controls.mailToken.errors?null:n.controls.mailToken.errors.required)&&((null==n.controls.mailToken?null:n.controls.mailToken.dirty)||(null==n.controls.mailToken?null:n.controls.mailToken.touched))),e.xp6(3),e.Q6J("ngModel",t.pass)("toggleMask",!0),e.xp6(1),e.Q6J("ngIf",(null==n.controls.pass||null==n.controls.pass.errors?null:n.controls.pass.errors.required)&&((null==n.controls.pass?null:n.controls.pass.dirty)||(null==n.controls.pass?null:n.controls.pass.touched))),e.xp6(1),e.Q6J("ngIf",(null==n.controls.pass||null==n.controls.pass.errors?null:n.controls.pass.errors.minlength)&&((null==n.controls.pass?null:n.controls.pass.dirty)||(null==n.controls.pass?null:n.controls.pass.touched))),e.xp6(3),e.Q6J("ngModel",t.confirmPass)("toggleMask",!0),e.xp6(1),e.Q6J("ngIf",(null==n.controls.confirmPass||null==n.controls.confirmPass.errors?null:n.controls.confirmPass.errors.required)&&((null==n.controls.confirmPass?null:n.controls.confirmPass.dirty)||(null==n.controls.confirmPass?null:n.controls.confirmPass.touched))),e.xp6(1),e.Q6J("ngIf",t.confirmPass!==t.pass&&((null==n.controls.confirmPass?null:n.controls.confirmPass.dirty)||(null==n.controls.confirmPass?null:n.controls.confirmPass.touched))),e.xp6(3),e.Q6J("disabled",n.invalid||t.confirmPass!==t.pass)}},dependencies:[g.O5,c.rH,u.Hq,v.XZ,p.o,d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.wO,d.On,d.F,M.ro,f.V,C.FN,x.H],styles:["*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:#f0f0f0}.login-page[_ngcontent-%COMP%]{position:relative;min-height:100vh;display:flex;justify-content:center;align-items:center;overflow:hidden}#background-video[_ngcontent-%COMP%]{position:fixed;right:0;bottom:0;min-width:100%;min-height:100%;width:auto;height:auto;z-index:-1;object-fit:cover;filter:brightness(70%)}.login-container[_ngcontent-%COMP%]{position:relative;z-index:2;width:100%;max-width:420px;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.log-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;padding:2rem;box-shadow:0 8px 32px #1f26875e;border:1px solid rgba(255,255,255,.18);transition:all .3s ease}.log-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 40px #1f268773}.logo[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#fff;font-weight:500}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:none;border-radius:8px;background:rgba(255,255,255,.2);color:#fff;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;background:rgba(255,255,255,.3);box-shadow:0 0 0 2px #ffffff80}.sign-in-btn[_ngcontent-%COMP%]{background:linear-gradient(45deg,rgba(184,109,188,.6431372549),rgba(113,3,119,.6431372549));border:none;color:#fff;padding:1rem;border-radius:8px;cursor:pointer;transition:all .3s ease}.sign-in-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#b785b3,#b206b5);transform:translateY(-2px);box-shadow:0 4px 8px #0003}.link-custom[_ngcontent-%COMP%]{color:#fff;transition:all .3s ease}.link-custom[_ngcontent-%COMP%]:hover{color:#4caf50;text-decoration:underline}.register-link[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;color:#fff}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4caf50;text-decoration:none;font-weight:600;transition:all .3s ease}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.circles-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:1}.circles[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:absolute;display:block;list-style:none;width:20px;height:20px;background:rgba(255,255,255,.2);animation:_ngcontent-%COMP%_animate 25s linear infinite;bottom:-150px}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){left:25%;width:80px;height:80px;animation-delay:0s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){left:10%;width:20px;height:20px;animation-delay:2s;animation-duration:12s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){left:70%;width:20px;height:20px;animation-delay:4s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){left:40%;width:60px;height:60px;animation-delay:0s;animation-duration:18s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){left:65%;width:20px;height:20px;animation-delay:0s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){left:75%;width:110px;height:110px;animation-delay:3s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7){left:35%;width:150px;height:150px;animation-delay:7s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8){left:50%;width:25px;height:25px;animation-delay:15s;animation-duration:45s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(9){left:20%;width:15px;height:15px;animation-delay:2s;animation-duration:35s}.circles[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(10){left:85%;width:150px;height:150px;animation-delay:0s;animation-duration:11s}@keyframes _ngcontent-%COMP%_animate{0%{transform:translateY(0) rotate(0);opacity:1;border-radius:0}to{transform:translateY(-1000px) rotate(720deg);opacity:0;border-radius:50%}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}@media (max-width: 768px){.login-container[_ngcontent-%COMP%]{padding:1rem}.log-card[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:.5rem}.log-card[_ngcontent-%COMP%]{padding:1rem}}","[_nghost-%COMP%]     .pi-eye, [_nghost-%COMP%]     .pi-eye-slash{transform:scale(1.6);margin-right:1rem;color:var(--primary-color)!important}"]})}return o})(),U=(()=>{class o{static#e=this.\u0275fac=function(s){return new(s||o)};static#n=this.\u0275mod=e.oAB({type:o});static#t=this.\u0275inj=e.cJS({imports:[c.Bz.forChild([{path:"",component:L}]),c.Bz]})}return o})();var N=i(4864),E=i(3259),q=i(8454),Q=i(9552),V=i(3904),z=i(9246),F=i(1494);let I=(()=>{class o{static#e=this.\u0275fac=function(s){return new(s||o)};static#n=this.\u0275mod=e.oAB({type:o});static#t=this.\u0275inj=e.cJS({imports:[g.ez,U,u.hJ,v.nD,p.j,d.u5,M.gz,f.S,g.ez,N.M,C.EV,f.S,d.u5,E.z,p.j,u.hJ,q.y,Q.U$,V.D,z.l,x.T,F.n,d.u5,d.UX]})}return o})()}}]);